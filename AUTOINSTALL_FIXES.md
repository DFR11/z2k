# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∞–≤—Ç–æ—É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–±–µ–∑ –≤–æ–ø—Ä–æ—Å–æ–≤ —é–∑–µ—Ä—É)

**–î–∞—Ç–∞:** 2026-01-28
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–æ–±–∞–≤–∏–ª–∞ **–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –º–µ–Ω—é** –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (IPv6, Flow Offloading, TMPDIR). –ù–æ z2k - —ç—Ç–æ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫**, –∞ –Ω–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä.

**–ü—Ä–∏–Ω—Ü–∏–ø:** –£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Keenetic –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Ö –ë–ï–ó –≤–æ–ø—Ä–æ—Å–æ–≤.

---

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û

### 1. TMPDIR - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä (–ë–ï–ó –≤–æ–ø—Ä–æ—Å–æ–≤)
**–§–∞–π–ª:** `lib/install.sh:step_configure_tmpdir()`

**–õ–æ–≥–∏–∫–∞:**
```bash
if RAM ‚â§ 400MB:
    TMPDIR=/opt/zapret2/tmp  # –ó–∞—â–∏—Ç–∞ –æ—Ç OOM
else:
    TMPDIR=""  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –±—ã—Å—Ç—Ä—ã–π /tmp
```

**–î–æ:**
```
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∏—Å–∫ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤? [Y/n]: _
```

**–ü–æ—Å–ª–µ:**
```
[‚úì] Low RAM —Å–∏—Å—Ç–µ–º–∞ - –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∏—Å–∫ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
[‚úì] TMPDIR —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: /opt/zapret2/tmp (–∑–∞—â–∏—Ç–∞ –æ—Ç OOM)
```

---

### 2. DISABLE_IPV6=1 - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è Keenetic
**–§–∞–π–ª:** `lib/config_official.sh:207`

**–ò–∑–º–µ–Ω–µ–Ω–æ:**
```bash
# –î–æ:
DISABLE_IPV6=0  # IPv6 –≤–∫–ª—é—á–µ–Ω

# –ü–æ—Å–ª–µ:
DISABLE_IPV6=1  # IPv6 –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è Keenetic
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ Keenetic —Ä–æ—É—Ç–µ—Ä–æ–≤ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç IPv6 –∏–ª–∏ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ.

---

### 3. FLOWOFFLOAD=none - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º
**–§–∞–π–ª:** `lib/install.sh:step_disable_hwnat_and_offload()`

**–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:**
```bash
export FLOWOFFLOAD=none
```

**–ü—Ä–∏—á–∏–Ω–∞:** Flow offloading **–Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º** —Å nfqws. –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º `none` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å.

---

### 4. –£–¥–∞–ª–µ–Ω–æ –º–µ–Ω—é [S] –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
**–§–∞–π–ª:** `lib/menu.sh`

**–£–¥–∞–ª–µ–Ω–æ:**
- –ü—É–Ω–∫—Ç –º–µ–Ω—é `[S] –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏`
- –§—É–Ω–∫—Ü–∏—è `menu_system_settings()`
- –§—É–Ω–∫—Ü–∏—è `menu_toggle_ipv6()`
- –§—É–Ω–∫—Ü–∏—è `menu_configure_offload()`
- –§—É–Ω–∫—Ü–∏—è `menu_configure_tmpdir()`

**–ü—Ä–∏—á–∏–Ω–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å —é–∑–µ—Ä—É –º–µ–Ω—è—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Ä—É—á–Ω—É—é. –í—Å—ë –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ.

---

## üìä –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ï –ù–ê–°–¢–†–û–ô–ö–ò –î–õ–Ø KEENETIC

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏—á–∏–Ω–∞ |
|----------|----------|---------|
| DISABLE_IPV6 | 1 (–æ—Ç–∫–ª—é—á–µ–Ω) | –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ Keenetic –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç IPv6 |
| FLOWOFFLOAD | none | nfqws –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å offloading |
| TMPDIR | –ê–≤—Ç–æ (–ø–æ RAM) | RAM ‚â§ 400MB ‚Üí /opt/zapret2/tmp, –∏–Ω–∞—á–µ /tmp |
| SYSTEM | openwrt | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| FWTYPE | iptables | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| INIT | procd | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–µ–∑ –≤–æ–ø—Ä–æ—Å–æ–≤:
sh z2k.sh install

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# [‚úì] –°–∏—Å—Ç–µ–º–∞: openwrt (init: procd)
# [‚úì] Low RAM —Å–∏—Å—Ç–µ–º–∞ - –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∏—Å–∫ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
# [‚úì] TMPDIR —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: /opt/zapret2/tmp (–∑–∞—â–∏—Ç–∞ –æ—Ç OOM)
# [‚úì] –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 06:00)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å config:
grep DISABLE_IPV6 /opt/zapret2/config
# –í—ã–≤–æ–¥: DISABLE_IPV6=1

grep FLOWOFFLOAD /opt/zapret2/config
# –í—ã–≤–æ–¥: FLOWOFFLOAD=none

grep TMPDIR /opt/zapret2/config
# –í—ã–≤–æ–¥ (–¥–ª—è low RAM): TMPDIR=/opt/zapret2/tmp
# –í—ã–≤–æ–¥ (–¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ RAM): #TMPDIR=/opt/zapret2/tmp
```

---

## üìÅ –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´

1. **lib/install.sh** (1 –∏–∑–º–µ–Ω–µ–Ω–∏–µ)
   - `step_configure_tmpdir()` - —É–±—Ä–∞–Ω—ã –≤–æ–ø—Ä–æ—Å—ã, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä

2. **lib/config_official.sh** (1 –∏–∑–º–µ–Ω–µ–Ω–∏–µ)
   - –°—Ç—Ä–æ–∫–∞ 207: DISABLE_IPV6=1 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

3. **lib/menu.sh** (2 –∏–∑–º–µ–Ω–µ–Ω–∏—è)
   - –£–¥–∞–ª—ë–Ω –ø—É–Ω–∫—Ç [S] –∏–∑ –º–µ–Ω—é
   - –£–¥–∞–ª–µ–Ω—ã 4 —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (220 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞)

---

## ‚úÖ –ò–¢–û–ì

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚ùå –Æ–∑–µ—Ä—É –∑–∞–¥–∞–≤–∞–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –æ TMPDIR
- ‚ùå –Æ–∑–µ—Ä—É –ø—Ä–µ–¥–ª–∞–≥–∞–ª–∏ –º–µ–Ω—è—Ç—å IPv6/Offloading —á–µ—Ä–µ–∑ –º–µ–Ω—é
- ‚ùå IPv6 –≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è Keenetic)

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä TMPDIR –ø–æ RAM
- ‚úÖ –£–±—Ä–∞–Ω–æ –Ω–µ–Ω—É–∂–Ω–æ–µ –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ IPv6 –æ—Ç–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è Keenetic)
- ‚úÖ FLOWOFFLOAD=none (–±–µ–∑–æ–ø–∞—Å–Ω–æ, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å nfqws)

---

## üéØ –ü–†–ò–ù–¶–ò–ü –ê–í–¢–û–£–°–¢–ê–ù–û–í–ö–ò

z2k - —ç—Ç–æ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫** –¥–ª—è Keenetic, –∞ –Ω–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä.

**–í—Å—ë –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑ –∫–æ—Ä–æ–±–∫–∏:**
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø —Å–∏—Å—Ç–µ–º—ã ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –í—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π firewall ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å TMPDIR –¥–ª—è low RAM ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å IPv6 ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–æ—Ç–∫–ª—é—á–µ–Ω)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å offloading ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (none)

**–Æ–∑–µ—Ä –¥–æ–ª–∂–µ–Ω:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å `sh z2k.sh install`
2. –ü–æ–¥–æ–∂–¥–∞—Ç—å 5 –º–∏–Ω—É—Ç
3. –ü–æ–ª—É—á–∏—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π DPI bypass

---

**–ì–æ—Ç–æ–≤–æ!** z2k —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤. üöÄ
