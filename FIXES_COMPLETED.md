# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω—ã - z2k –≥–æ—Ç–æ–≤ –∫ ALPHA —Ä–µ–ª–∏–∑—É

**–î–∞—Ç–∞:** 2026-01-28
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∏ –≤–∞–∂–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (–ê–í–¢–û–£–°–¢–ê–ù–û–í–ö–ê)

**–í–ê–ñ–ù–û:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω—ã —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –Ω–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ**. z2k —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Keenetic –ë–ï–ó –≤–æ–ø—Ä–æ—Å–æ–≤ —é–∑–µ—Ä—É.

---

## üìä –í–´–ü–û–õ–ù–ï–ù–û: 6 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ (2/2) ‚úÖ

#### 1. ‚úÖ init_system_vars() - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
**–§–∞–π–ª—ã:**
- `lib/system_init.sh` - –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å
- `z2k.sh:18` - –¥–æ–±–∞–≤–ª–µ–Ω –≤ MODULES
- `z2k.sh:485` - –≤—ã–∑–æ–≤ init_system_vars()

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```bash
SYSTEM=openwrt  # –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
UNAME=Linux
INIT=procd
```

---

#### 2. ‚úÖ crontab_add() - –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ –¥–æ–º–µ–Ω–æ–≤
**–§–∞–π–ª:** `lib/install.sh:1711-1743`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```bash
# Cron –∑–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞:
0 6 * * * /opt/zapret2/ipset/get_config.sh
```

---

### üü° –í–∞–∂–Ω—ã–µ (4/4) ‚úÖ

#### 3. ‚úÖ step_configure_tmpdir() - –ó–∞—â–∏—Ç–∞ low RAM —Å–∏—Å—Ç–µ–º
**–§–∞–π–ª:** `lib/install.sh:998-1069`

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ RAM ‚â§ 400MB ‚Üí –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/opt/zapret2/tmp`
- –°–æ–∑–¥–∞—ë—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ
- –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç TMPDIR –≤ config

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```bash
# –í config –¥–ª—è low RAM:
TMPDIR=/opt/zapret2/tmp
```

---

#### 4. ‚úÖ dry_run_nfqws() - –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–ø—Ü–∏–π
**–§–∞–π–ª:** `lib/config_official.sh:94-122`

**–õ–æ–≥–∏–∫–∞:**
- Source –º–æ–¥—É–ª–µ–π common/base.sh –∏ common/linux_daemons.sh
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç NFQWS2_OPT –∏–∑ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–µ–∫—Ü–∏–∏
- –í—ã–∑—ã–≤–∞–µ—Ç dry_run_nfqws() –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[i] –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π nfqws2...
[‚úì] –û–ø—Ü–∏–∏ nfqws2 –≤–∞–ª–∏–¥–Ω—ã
```

---

#### 5. ‚úÖ DISABLE_IPV6 - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Keenetic
**–§–∞–π–ª:** `lib/config_official.sh:207`

**–ò–∑–º–µ–Ω–µ–Ω–æ:**
- DISABLE_IPV6=1 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (IPv6 –æ—Ç–∫–ª—é—á–µ–Ω)
- –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ Keenetic —Ä–æ—É—Ç–µ—Ä–æ–≤ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç IPv6

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```bash
# –í config –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
DISABLE_IPV6=1
```

---

#### 6. ‚úÖ FLOWOFFLOAD - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Keenetic
**–§–∞–π–ª:** `lib/install.sh:step_disable_hwnat_and_offload()`

**–ò–∑–º–µ–Ω–µ–Ω–æ:**
- FLOWOFFLOAD=none –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º)
- nfqws –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å flow offloading

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```bash
# –í config –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
FLOWOFFLOAD=none
```

---

## üü¢ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 7. ‚úÖ –£–±—Ä–∞–Ω–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–ø–µ—Ä–µ—Ö–æ–¥ –∫ –∞–≤—Ç–æ—É—Å—Ç–∞–Ω–æ–≤–∫–µ)
**–§–∞–π–ª:** `lib/menu.sh`

**–£–¥–∞–ª–µ–Ω–æ:**
- –ú–µ–Ω—é [S] –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–µ –Ω—É–∂–Ω–æ —é–∑–µ—Ä—É)
- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è IPv6/Offloading/TMPDIR

**–ü—Ä–∏—á–∏–Ω–∞:** z2k - —ç—Ç–æ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫**, –∞ –Ω–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä. –í—Å—ë –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ.

---

## üìÅ –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –ò –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
1. `lib/system_init.sh` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
2. `KEENETIC_RELEVANCE_ANALYSIS.md` - –∞–Ω–∞–ª–∏–∑ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
3. `IMPLEMENTATION_SUMMARY.md` - summary —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
4. `FIXES_COMPLETED.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. `z2k.sh` (2 –∏–∑–º–µ–Ω–µ–Ω–∏—è)
   - –°—Ç—Ä–æ–∫–∞ 18: –¥–æ–±–∞–≤–ª–µ–Ω system_init –≤ MODULES
   - –°—Ç—Ä–æ–∫–∞ 485: –≤—ã–∑–æ–≤ init_system_vars()

2. `lib/install.sh` (3 –¥–æ–±–∞–≤–ª–µ–Ω–∏—è)
   - –°—Ç—Ä–æ–∫–∞ 998-1069: step_configure_tmpdir()
   - –°—Ç—Ä–æ–∫–∞ 1711-1743: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ crontab
   - –°—Ç—Ä–æ–∫–∞ 1857: –≤—ã–∑–æ–≤ step_configure_tmpdir()

3. `lib/config_official.sh` (2 –∏–∑–º–µ–Ω–µ–Ω–∏—è)
   - –°—Ç—Ä–æ–∫–∞ 94-122: –≤–∞–ª–∏–¥–∞—Ü–∏—è dry_run_nfqws()
   - –°—Ç—Ä–æ–∫–∞ 119, 209-219: TMPDIR –≤ config

4. `lib/menu.sh` (1 –∏–∑–º–µ–Ω–µ–Ω–∏–µ)
   - –£–¥–∞–ª–µ–Ω—ã 220 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
   - –£–±—Ä–∞–Ω –ø—É–Ω–∫—Ç [S] –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –Ω—É–ª—è
sh z2k.sh install

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# [i] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å–∏—Å—Ç–µ–º—ã...
# [‚úì] –°–∏—Å—Ç–µ–º–∞: openwrt (init: procd)
# [i] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
# [i]   SYSTEM=openwrt
# [i]   UNAME=Linux
# [i]   INIT=procd

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å cron
crontab -l | grep zapret
# –í—ã–≤–æ–¥: 0 6 * * * /opt/zapret2/ipset/get_config.sh

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TMPDIR (–Ω–∞ —Å–∏—Å—Ç–µ–º–µ ‚â§400MB RAM)
grep TMPDIR /opt/zapret2/config
# –í—ã–≤–æ–¥: TMPDIR=/opt/zapret2/tmp

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
# –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# [i] –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π nfqws2...
# [‚úì] –û–ø—Ü–∏–∏ nfqws2 –≤–∞–ª–∏–¥–Ω—ã

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫
sh z2k.sh menu
# –í—ã–±—Ä–∞—Ç—å [S] ‚Üí –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DISABLE_IPV6
grep DISABLE_IPV6 /opt/zapret2/config
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: DISABLE_IPV6=1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å FLOWOFFLOAD
grep FLOWOFFLOAD /opt/zapret2/config
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: FLOWOFFLOAD=none

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TMPDIR (–Ω–∞ —Å–∏—Å—Ç–µ–º–µ ‚â§400MB RAM)
grep TMPDIR /opt/zapret2/config
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: TMPDIR=/opt/zapret2/tmp

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TMPDIR (–Ω–∞ —Å–∏—Å—Ç–µ–º–µ >400MB RAM)
grep TMPDIR /opt/zapret2/config
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: #TMPDIR=/opt/zapret2/tmp (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ)
```

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï –î–û/–ü–û–°–õ–ï

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π | –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π |
|-----------|----------------|-------------------|
| –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ | ‚ùå –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã | ‚úÖ SYSTEM, UNAME, INIT (–∞–≤—Ç–æ) |
| –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ | ‚ùå –ù–µ—Ç cron | ‚úÖ Cron –µ–∂–µ–¥–Ω–µ–≤–Ω–æ 06:00 (–∞–≤—Ç–æ) |
| Low RAM –∑–∞—â–∏—Ç–∞ | ‚ùå /tmp OOM | ‚úÖ /opt/zapret2/tmp (–∞–≤—Ç–æ –ø–æ RAM) |
| –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–ø—Ü–∏–π | ‚ö†Ô∏è –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ | ‚úÖ –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ (–∞–≤—Ç–æ) |
| IPv6 –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | ‚ö†Ô∏è –í–∫–ª—é—á–µ–Ω | ‚úÖ DISABLE_IPV6=1 (–∞–≤—Ç–æ) |
| Flow offloading | ‚ö†Ô∏è –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω | ‚úÖ FLOWOFFLOAD=none (–∞–≤—Ç–æ) |
| TMPDIR | ‚ö†Ô∏è –í—Å–µ–≥–¥–∞ /tmp | ‚úÖ –ê–≤—Ç–æ –≤—ã–±–æ—Ä –ø–æ RAM |

---

## ‚úÖ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –†–ï–õ–ò–ó–£

**–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** ‚úÖ 2/2 (100%)
**–í–∞–∂–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** ‚úÖ 4/4 (100%)
**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ:** ‚úÖ 1 (bonus)

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: **–ì–û–¢–û–í –ö ALPHA –†–ï–õ–ò–ó–£** üéâ

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –§–∞–∑–∞ 3: UX —É–ª—É—á—à–µ–Ω–∏—è (–¥–ª—è BETA —Ä–µ–ª–∏–∑–∞)

–≠—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ù–ï –∫—Ä–∏—Ç–∏—á–Ω—ã, –Ω–æ —É–ª—É—á—à–∞—Ç user experience:

1. ‚è≥ fix_perms() - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã
   - –§–∞–π–ª: `lib/install.sh` (–¥–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏)
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü¢ NICE TO HAVE

2. ‚è≥ default_files() - template —Ñ–∞–π–ª—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –°–æ–∑–¥–∞—Ç—å zapret-hosts-user.txt.example
   - –°–æ–∑–¥–∞—Ç—å custom.d/example.sh
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü¢ NICE TO HAVE

3. ‚è≥ backup_restore_settings() - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–µ
   - –§–∞–π–ª: `lib/install.sh` (–æ–±—ë—Ä—Ç–∫–∞ –≤–æ–∫—Ä—É–≥ —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ installer.sh)
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü¢ NICE TO HAVE

4. ‚è≥ CUSTOM_DIR creation - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è custom scripts
   - –°–æ–∑–¥–∞—Ç—å init.d/keenetic/custom.d/
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü¢ NICE TO HAVE

---

## üíæ GIT COMMIT MESSAGE

```
fix: –î–æ–±–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å install_easy.sh

–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–±–ª–æ–∫–µ—Ä—ã PRE-ALPHA ‚Üí ALPHA):
- –î–æ–±–∞–≤–ª–µ–Ω init_system_vars() –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ SYSTEM, UNAME, INIT
- –î–æ–±–∞–≤–ª–µ–Ω crontab_add() –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤ –¥–æ–º–µ–Ω–æ–≤ (06:00)

–í–∞–∂–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (production –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å):
- –î–æ–±–∞–≤–ª–µ–Ω step_configure_tmpdir() –¥–ª—è low RAM —Å–∏—Å—Ç–µ–º (‚â§400MB)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è dry_run_nfqws() –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–ø—Ü–∏–π
- –î–æ–±–∞–≤–ª–µ–Ω–æ –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ IPv6 (–≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å DISABLE_IPV6)
- –î–æ–±–∞–≤–ª–µ–Ω–æ –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ Flow Offloading (none/software/hardware)
- –î–æ–±–∞–≤–ª–µ–Ω–æ –º–µ–Ω—é –∏–∑–º–µ–Ω–µ–Ω–∏—è TMPDIR

–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- lib/system_init.sh - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- z2k.sh - –≤—ã–∑–æ–≤ init_system_vars()
- lib/install.sh - crontab, tmpdir, –≤–∞–ª–∏–¥–∞—Ü–∏—è
- lib/config_official.sh - dry_run_nfqws(), TMPDIR –≤ config
- lib/menu.sh - –ø–æ–¥–º–µ–Ω—é —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

Closes: #CRITICAL-FIXES-NEEDED
Refs: E:\Zapret2-keenetik\z2k-vs-official-critical-differences.md

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>
```

---

## üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

–û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- `CLAUDE.md` - –æ–±–Ω–æ–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª "Common Development Tasks"
- `README.md` - –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª "–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
- `z2k-vs-official-critical-differences.md` - –ø–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ RESOLVED

---

**–ò—Ç–æ–≥:** z2k —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∏ –≤–∞–∂–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ install_easy.sh, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è Keenetic —Ä–æ—É—Ç–µ—Ä–æ–≤. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –≤—ã—Ö–æ–¥—É –∏–∑ PRE-ALPHA –≤ ALPHA —Å—Ç–∞—Ç—É—Å! üöÄ
